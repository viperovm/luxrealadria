{"version":3,"sources":["redux/actions/listings.js","components/sections/siteAdmin/Content.js","components/pages/SiteAdmin.js"],"names":["setPrice","price","a","addDoc","collection","db","priceRef","id","console","log","error","getNumber","name","arr","q","query","getDocs","forEach","doc","push","number","data","setNumber","current","previous","parseInt","docRef","updateDoc","add_listing","propertyName","propertyDescription","propertyPurpose","propertyStatus","propertyType","propertyPrice","propertySpace","propertyVideo","propertyFeatures","propertyId","propertyBeds","propertyBaths","propertyCondition","propertyBuiltYear","urls","dispatch","type","ADD_LISTING_SUCCESS","payload","ADD_LISTING_FAIL","features","icon","title","connect","state","isAuthenticated","auth","props","useState","setPropertyName","setPropertyDescription","setPropertyPurpose","setPropertyStatus","propertyRegion","setPropertyRegion","setPropertyType","setPropertyPrice","setPropertySpace","setPropertyVideo","setPropertyFeatures","setPropertyId","setPropertyBeds","setPropertyBaths","setPropertyCondition","setPropertyBuiltYear","files","setFiles","setUrls","propertyRentalPeriod","setPropertyRentalPeriod","rentalPeriod","setRentalPeriod","useEffect","useDropzone","accept","onDrop","acceptedFiles","map","file","Object","assign","preview","URL","createObjectURL","getRootProps","getInputProps","thumbs","className","src","alt","revokeObjectURL","Tab","Container","defaultActiveKey","Nav","variant","Item","Link","eventKey","onClick","storage","getStorage","metadata","contentType","storageRef","ref","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","getDownloadURL","then","downloadURL","onSubmit","e","preventDefault","handleSubmit","Content","Pane","required","rows","placeholder","value","onChange","target","style","fontSize","item","i","checked","includes","length","splice","SiteAdmin","content","Header","Breadcrumb","breadcrumb","pagename"],"mappings":"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","file":"static/js/21.d4d53e27.chunk.js","sourcesContent":["import {\n  collection,\n  addDoc,\n  doc,\n  setDoc,\n  query,\n  where,\n  getDocs,\n  getDoc,\n  updateDoc,\n} from 'firebase/firestore'\nimport {\n  auth,\n  createUserProfileDocument,\n  db,\n} from '../../firebase/firebase.utils'\nimport {\n  ADD_LISTING_SUCCESS,\n  ADD_LISTING_FAIL,\n  GET_ALL_LISTINGS_SUCCESS,\n  GET_ALL_LISTINGS_FAIL,\n  GET_LISTING_SUCCESS,\n  GET_LISTING_FAIL,\n  SORT_LISTING_SUCCESS,\n} from './types'\n\nconst setPrice = async price => {\n  const priceRef = await addDoc(collection(db, 'prices'), {\n    price: price,\n  })\n  if (priceRef && priceRef.id) {\n    console.log('Цена добавлена')\n  } else {\n    console.error('Ошибка добавления цены')\n  }\n}\n\nexport const getNumber = async name => {\n  let arr = []\n  const q = query(collection(db, name))\n  try {\n    const querySnapshot = await getDocs(q)\n    \n    querySnapshot.forEach(doc => {\n      arr.push({ number: doc.data().number, id: doc.id })\n    })\n  } catch (error) {\n    console.error(error)\n  }\n  return arr[0]\n}\n\nconst setNumber = async (name, current) => {\n  let previous = await getNumber(name)\n  if (parseInt(previous.number) < parseInt(current)) {\n    const docRef = doc(db, name, previous.id)\n    try {\n      await updateDoc(docRef, {\n        number: parseInt(current),\n      })\n      console.log(\n        `Количество ${\n          name === 'beds' ? 'спален' : name === 'baths' ? 'санузлов' : ''\n        } обновлено`\n      )\n    } catch (err) {\n      console.error(\n        `Ошибка при обновлении количества ${\n          name === 'beds' ? 'спален' : name === 'baths' ? 'санузлов' : ''\n        }: `,\n        err\n      )\n    }\n  }\n}\n\nexport const add_listing =\n  (\n    propertyName,\n    propertyDescription,\n    propertyPurpose,\n    propertyStatus,\n    propertyType,\n    propertyPrice,\n    propertySpace,\n    propertyVideo,\n    propertyFeatures,\n    propertyId,\n    propertyBeds,\n    propertyBaths,\n    propertyCondition,\n    propertyBuiltYear,\n    urls\n  ) =>\n  async dispatch => {\n    const docRef = await addDoc(collection(db, 'listings'), {\n      propertyName: propertyName,\n      propertyDescription: propertyDescription,\n      propertyPurpose: propertyPurpose,\n      propertyStatus: propertyStatus,\n      propertyType: propertyType,\n      propertyPrice: propertyPrice,\n      propertySpace: propertySpace,\n      propertyVideo: propertyVideo,\n      propertyFeatures: propertyFeatures,\n      propertyId: propertyId,\n      propertyBeds: propertyBeds,\n      propertyBaths: propertyBaths,\n      propertyCondition: propertyCondition,\n      propertyBuiltYear: propertyBuiltYear,\n      urls: urls,\n    })\n    if (docRef && docRef.id) {\n      setPrice(propertyPrice)\n      setNumber('beds', propertyBeds)\n      setNumber('baths', propertyBaths)\n\n      dispatch({\n        type: ADD_LISTING_SUCCESS,\n        payload: docRef,\n      })\n    } else {\n      dispatch({\n        type: ADD_LISTING_FAIL,\n        payload: 'При записи объекта произошла ошибка. Повторите попытку позже',\n      })\n    }\n  }\n\nexport const get_all_listings = () => async dispatch => {\n  const arr = []\n  const q = query(collection(db, 'listings'))\n  try {\n    const querySnapshot = await getDocs(q)\n    querySnapshot.forEach(doc => {\n      arr.push(doc.data())\n    })\n\n    dispatch({\n      type: GET_ALL_LISTINGS_SUCCESS,\n      payload: arr,\n    })\n  } catch (error) {\n    dispatch({\n      type: GET_ALL_LISTINGS_FAIL,\n      payload: error,\n    })\n  }\n}\n\nexport const get_listing = uid => async dispatch => {\n  const docRef = doc(db, 'listings', uid)\n  const docSnap = await getDoc(docRef)\n\n  if (docSnap.exists()) {\n    dispatch({\n      type: GET_LISTING_SUCCESS,\n      payload: docSnap.data(),\n    })\n  } else {\n    dispatch({\n      type: GET_LISTING_FAIL,\n      payload: 'Объект отсутствует',\n    })\n  }\n}\n\nexport const sort_listing =\n  (\n    propertyPurpose,\n    propertyStatus,\n    propertyType,\n    propertyPrice,\n    propertySpace,\n    propertyBeds,\n    propertyBaths\n  ) =>\n  async dispatch => {\n    const arr = []\n\n    if (propertyPurpose) {\n      arr.push({ propertyPurpose: propertyPurpose })\n    }\n\n    if (propertyStatus) {\n      arr.push({ propertyStatus: propertyStatus })\n    }\n\n    if (propertyType) {\n      arr.push({ propertyType: propertyType })\n    }\n\n    if (propertyPrice) {\n      arr.push({ propertyPrice: propertyPrice })\n    }\n\n    if (propertySpace) {\n      arr.push({ propertySpace: propertySpace })\n    }\n\n    if (propertyBeds) {\n      arr.push({ propertyBeds: propertyBeds })\n    }\n\n    if (propertyBaths) {\n      arr.push({ propertyBaths: propertyBaths })\n    }\n\n    dispatch({\n      type: SORT_LISTING_SUCCESS,\n      payload: arr,\n    })\n  }\n","import React, { useEffect, useState } from 'react'\r\nimport { Tab, Nav } from 'react-bootstrap'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport { connect } from 'react-redux'\r\nimport { add_listing } from '../../../redux/actions/listings'\r\n\r\n\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n  getDownloadURL,\r\n} from 'firebase/storage'\r\n\r\n\r\nconst features = [\r\n  { id: 1, icon: 'bone', title: 'Можно с животными' },\r\n  { id: 2, icon: 'chair', title: 'Меблировано' },\r\n  { id: 3, icon: 'fan', title: 'Кондиционирование' },\r\n  { id: 4, icon: 'garage', title: 'Паркинг/гараж' },\r\n  { id: 5, icon: 'new', title: 'Новый объект' },\r\n  { id: 6, icon: 'eye', title: 'Вид на море' },\r\n]\r\n\r\nfunction Content(props) {\r\n  const [propertyName, setPropertyName] = useState('')\r\n  const [propertyDescription, setPropertyDescription] = useState('')\r\n  const [propertyPurpose, setPropertyPurpose] = useState('sale')\r\n  const [propertyStatus, setPropertyStatus] = useState('none')\r\n  const [propertyRegion, setPropertyRegion] = useState('')\r\n  const [propertyType, setPropertyType] = useState('commercial')\r\n  const [propertyPrice, setPropertyPrice] = useState('')\r\n  const [propertySpace, setPropertySpace] = useState('')\r\n  const [propertyVideo, setPropertyVideo] = useState('')\r\n  const [propertyFeatures, setPropertyFeatures] = useState([])\r\n  const [propertyId, setPropertyId] = useState('')\r\n  const [propertyBeds, setPropertyBeds] = useState('')\r\n  const [propertyBaths, setPropertyBaths] = useState('')\r\n  const [propertyCondition, setPropertyCondition] = useState('')\r\n  const [propertyBuiltYear, setPropertyBuiltYear] = useState('')\r\n  const [files, setFiles] = useState([])\r\n  const [urls, setUrls] = useState([])\r\n\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    console.log(11)\r\n    props.add_listing(\r\n      propertyName,\r\n      propertyDescription,\r\n      propertyPurpose,\r\n      propertyStatus,\r\n      propertyType,\r\n      propertyPrice,\r\n      propertySpace,\r\n      propertyVideo,\r\n      propertyFeatures,\r\n      propertyId,\r\n      propertyBeds,\r\n      propertyBaths,\r\n      propertyCondition,\r\n      propertyBuiltYear,\r\n      propertyRegion,\r\n      urls\r\n    )\r\n    console.log(12)\r\n  }\r\n\r\n\r\n  const [propertyRentalPeriod, setPropertyRentalPeriod] = useState('')\r\n  const [rentalPeriod, setRentalPeriod] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (propertyPurpose === 'rent') {\r\n      setRentalPeriod(true)\r\n    } else if (propertyPurpose === 'sale') {\r\n      setRentalPeriod(false)\r\n    }\r\n  }, [propertyPurpose])\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: 'image/*',\r\n    onDrop: acceptedFiles => {\r\n      setFiles(\r\n        acceptedFiles.map(file =>\r\n          Object.assign(file, {\r\n            preview: URL.createObjectURL(file),\r\n          })\r\n        )\r\n      )\r\n    },\r\n  })\r\n\r\n  const thumbs = files.map(file => (\r\n    <div className='thumb' key={file.name}>\r\n      <div className='thumbInner'>\r\n        <img src={file.preview} alt='img' />\r\n      </div>\r\n    </div>\r\n  ))\r\n\r\n  const uploadImages = () => {\r\n    files.forEach(file => {\r\n      const storage = getStorage()\r\n\r\n      const metadata = {\r\n        contentType: file.type,\r\n      }\r\n\r\n      const storageRef = ref(storage, propertyName + '/' + file.name)\r\n      const uploadTask = uploadBytesResumable(storageRef, file, metadata)\r\n\r\n      uploadTask.on(\r\n        'state_changed',\r\n        snapshot => {\r\n          const progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n          console.log('Upload is ' + progress + '% done')\r\n        },\r\n        error => {\r\n          console.error(error)\r\n        },\r\n        () => {\r\n          getDownloadURL(uploadTask.snapshot.ref).then(downloadURL =>\r\n            setUrls(urls => [...urls, downloadURL])\r\n          )\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n  useEffect(\r\n    () => () => {\r\n      // Make sure to revoke the data uris to avoid memory leaks\r\n      files.forEach(file => URL.revokeObjectURL(file.preview))\r\n      \r\n    },\r\n    [files]\r\n  )\r\n  return (\r\n    <div className='section'>\r\n      <div className='container'>\r\n        <div className='row'>\r\n          <Tab.Container defaultActiveKey='tab1'>\r\n            {/* Tabs Start */}\r\n            <div className='col-md-4'>\r\n              <Nav variant='tabs' className='nav nav-tabs tab-cards'>\r\n                <Nav.Item>\r\n                  <Nav.Link eventKey='tab1'>\r\n                    <span>01</span> Управление фильтрами\r\n                  </Nav.Link>\r\n                </Nav.Item>\r\n                <Nav.Item>\r\n                  <Nav.Link eventKey='tab2' >\r\n                    <span>02</span> Управление статьями\r\n                  </Nav.Link>\r\n                </Nav.Item>\r\n                <Nav.Item>\r\n                  <Nav.Link\r\n                    onClick={uploadImages}\r\n                    eventKey='tab3'\r\n                    \r\n                  >\r\n                    <span>03</span> Управление правовой информацией\r\n                  </Nav.Link>\r\n                </Nav.Item>\r\n                <Nav.Item>\r\n                  <Nav.Link eventKey='tab4' >\r\n                    <span>04</span> Управление контактами\r\n                  </Nav.Link>\r\n                </Nav.Item>\r\n              </Nav>\r\n            </div>\r\n            {/* Tabs End */}\r\n            {/* Tab Content Start */}\r\n            <div className='col-md-8'>\r\n              <form onSubmit={e => handleSubmit(e)}>\r\n                <Tab.Content className='m-0'>\r\n                  <Tab.Pane eventKey='tab1'>\r\n                    <div className='row'>\r\n                      <div className='col-md-12 form-group'>\r\n                        <label>Описание объекта</label>\r\n                        <textarea\r\n                          required\r\n                          name='content'\r\n                          rows={4}\r\n                          className='form-control'\r\n                          placeholder='Описание объекта'\r\n                          value={propertyDescription}\r\n                          onChange={e => setPropertyDescription(e.target.value)}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Название объекта</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Название объекта'\r\n                          name='name'\r\n                          value={propertyName}\r\n                          onChange={e => setPropertyName(e.target.value)}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Назначение объекта</label>\r\n                        <select\r\n                          required\r\n                          className='form-control'\r\n                          name='purpose'\r\n                          onChange={e => setPropertyPurpose(e.target.value)}\r\n                          value={propertyPurpose}\r\n                        >\r\n                          <option value='sale'>Продажа</option>\r\n                          <option value='rent'>Аренда</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className='col-md-6'>\r\n                        <label>Тип объекта</label>\r\n                        <select\r\n                          required\r\n                          className='form-control'\r\n                          name='type'\r\n                          onChange={e => setPropertyType(e.target.value)}\r\n                          value={propertyType}\r\n                        >\r\n                          <option value='commercial'>Комерческий</option>\r\n                          <option value='house'>Дом</option>\r\n                          <option value='apartment'>Апартаменты</option>\r\n                          <option value='condo'>Квартира</option>\r\n                          <option value='villa'>Вилла</option>\r\n                          <option value='duplex'>Дуплекс</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Стоимость объекта</label>\r\n                        <div className='input-group'>\r\n                          <div className='input-group-prepend'>\r\n                            <span className='input-group-text'>€</span>\r\n                          </div>\r\n                          <input\r\n                            required\r\n                            type='text'\r\n                            className='form-control'\r\n                            name='price'\r\n                            placeholder='Стоимость объекта'\r\n                            onChange={e => setPropertyPrice(e.target.value)}\r\n                            value={propertyPrice}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>\r\n                          Площадь объекта (м\r\n                          <sup style={{ fontSize: 10 }}>2</sup>)\r\n                        </label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Площадь объекта'\r\n                          name='space'\r\n                          onChange={e => setPropertySpace(e.target.value)}\r\n                          value={propertySpace}\r\n                        />\r\n                      </div>\r\n                      {rentalPeriod && (\r\n                        <div className='col-md-6'>\r\n                          <label>Тип аренды</label>\r\n                          <select\r\n                            required={rentalPeriod}\r\n                            className='form-control'\r\n                            name='period'\r\n                            onChange={e =>\r\n                              setPropertyRentalPeriod(e.target.value)\r\n                            }\r\n                            value={propertyRentalPeriod}\r\n                          >\r\n                            <option value='daily'>Посуточная</option>\r\n                            <option value='monthly'>Помесячная</option>\r\n                            <option value='lowSeason'>В межсезонье</option>\r\n                            <option value='yearly'>На год и более</option>\r\n                          </select>\r\n                        </div>\r\n                      )}\r\n                      <div className='col-md-12 form-group'>\r\n                        <label>Видео объекта</label>\r\n                        <input\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Ссылка на видео'\r\n                          name='video'\r\n                          onChange={e => setPropertyVideo(e.target.value)}\r\n                          value={propertyVideo}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </Tab.Pane>\r\n                  <Tab.Pane eventKey='tab2'>\r\n                    <div className='form-group'>\r\n                      <label>Галерея объекта</label>\r\n                      <div {...getRootProps({ className: 'dropzone' })}>\r\n                        <input {...getInputProps()} />\r\n                        <div className='dropzone-msg dz-message needsclick'>\r\n                          <i className='fas fa-cloud-upload-alt' />\r\n                          <h5 className='dropzone-msg-title'>\r\n                            Перетащите файлы сюда, или кликните для выбора.\r\n                          </h5>\r\n                          <span className='dropzone-msg-desc'>\r\n                            Максимальное количество файлов ограничено{' '}\r\n                            <strong>десятью</strong> штуками.\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <aside className='thumbsContainer'>{thumbs}</aside>\r\n                      {/* <span className='acr-form-notice'>\r\n                          *You can upload up to 5 images for your listing\r\n                        </span>\r\n                        <span className='acr-form-notice'>\r\n                          *Listing images should be atleast 620x480 in\r\n                          dimensions\r\n                        </span> */}\r\n                    </div>\r\n                  </Tab.Pane>\r\n\r\n                  <Tab.Pane eventKey='tab3'>\r\n                    <div className='row'>\r\n                      {features.map((item, i) => (\r\n                        <div key={i} className='col-lg-4 col-md-6 col-sm-6'>\r\n                          <label className='acr-listing-feature'>\r\n                            <input\r\n                              type='checkbox'\r\n                              name={'feature' + item.id + ''}\r\n                              onChange={e => {\r\n                                if (e.target.checked) {\r\n                                  if (\r\n                                    propertyFeatures.includes(e.target.name)\r\n                                  ) {\r\n                                    return\r\n                                  } else {\r\n                                    setPropertyFeatures([\r\n                                      ...propertyFeatures,\r\n                                      e.target.name,\r\n                                    ])\r\n                                  }\r\n                                } else if (!e.target.checked) {\r\n                                  if (\r\n                                    propertyFeatures.includes(e.target.name)\r\n                                  ) {\r\n                                    const arr = propertyFeatures\r\n\r\n                                    for (var i = 0; i < arr.length; i++) {\r\n                                      if (arr[i] === e.target.name) {\r\n                                        arr.splice(i, 1)\r\n                                      }\r\n                                    }\r\n                                    setPropertyFeatures(arr)\r\n                                  }\r\n                                }\r\n                              }}\r\n                            />\r\n                            <i className='acr-feature-check fas fa-check' />\r\n                            <i\r\n                              className={\r\n                                'acr-listing-feature-icon flaticon-' +\r\n                                item.icon +\r\n                                ''\r\n                              }\r\n                            />\r\n                            {item.title}\r\n                          </label>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </Tab.Pane>\r\n                  <Tab.Pane eventKey='tab4'>\r\n                    <div className='row'>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>ID объекта</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='ID объекта'\r\n                          name='id'\r\n                          onChange={e => setPropertyId(e.target.value)}\r\n                          value={propertyId}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Количество спален</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Количество спален'\r\n                          name='beds'\r\n                          onChange={e => setPropertyBeds(e.target.value)}\r\n                          value={propertyBeds}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Количество санузлов</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Количество санузлов'\r\n                          name='baths'\r\n                          onChange={e => setPropertyBaths(e.target.value)}\r\n                          value={propertyBaths}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Состояние</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Состояние объекта'\r\n                          name='condition'\r\n                          onChange={e => setPropertyCondition(e.target.value)}\r\n                          value={propertyCondition}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Статус объекта</label>\r\n                        <select\r\n                          className='form-control'\r\n                          name='status'\r\n                          onChange={e => setPropertyStatus(e.target.value)}\r\n                          value={propertyStatus}\r\n                        >\r\n                          <option value='none'>без статуса</option>\r\n                          <option value='specialOffer'>\r\n                            Специальное предложение\r\n                          </option>\r\n                          <option value='reduced'>Снижение цены</option>\r\n                          <option value='featured'>В тренде</option>\r\n                          <option value='sold'>Продано</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Год постройки</label>\r\n                        <input\r\n                          required\r\n                          type='text'\r\n                          className='form-control'\r\n                          placeholder='Год постройки'\r\n                          name='built'\r\n                          onChange={e => setPropertyBuiltYear(e.target.value)}\r\n                          value={propertyBuiltYear}\r\n                        />\r\n                      </div>\r\n                      <div className='col-md-6 form-group'>\r\n                        <label>Регион объекта</label>\r\n                        <select\r\n                          required\r\n                          className='form-control'\r\n                          name='status'\r\n                          onChange={e => setPropertyRegion(e.target.value)}\r\n                          value={propertyRegion}\r\n                        >\r\n                          <option value='none'>без статуса</option>\r\n                          <option value='specialOffer'>\r\n                            Специальное предложение\r\n                          </option>\r\n                          <option value='reduced'>Снижение цены</option>\r\n                          <option value='featured'>В тренде</option>\r\n                          <option value='sold'>Продано</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <button type='submit' className='btn-custom' name='submit'>\r\n                      Добавить объект\r\n                    </button>\r\n                  </Tab.Pane>\r\n                </Tab.Content>\r\n              </form>\r\n            </div>\r\n          </Tab.Container>\r\n          {/* Tab Content End */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  error: state.auth.error,\r\n})\r\n\r\nexport default connect(mapStateToProps, { add_listing })(Content)\r\n","import React, { Fragment, useEffect, useState } from 'react'\nimport MetaTags from 'react-meta-tags'\nimport Header from '../layouts/Header'\nimport Breadcrumb from '../layouts/Breadcrumb'\nimport Footer from '../layouts/Footerthree'\nimport Content from '../sections/siteAdmin/Content'\n\nconst SiteAdmin = () => {\n  return (\n    <Fragment>\n      <MetaTags>\n        <title>LuxRealAdria | Управление сайтом</title>\n        <meta name='description' content='#' />\n      </MetaTags>\n      <Header />\n      <Breadcrumb breadcrumb={{ pagename: 'Управление сайтом' }} />\n      <Content />\n      <Footer />\n    </Fragment>\n  )\n}\n\nexport default SiteAdmin\n"],"sourceRoot":""}